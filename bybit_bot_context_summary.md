# Bybit bot context summary

## Current live config (.env redacted)
- `TG_TOKEN=***`
- `TG_CHAT=319077869`
- `DRY_RUN=false`
- `BYBIT_BASE=https://api.bybit.com`
- `ENABLE_INPLAY_TRADING=1`
- `INPLAY_TOP_N=60`
- `INPLAY_TRY_EVERY_SEC=30`
- `ENABLE_BREAKOUT_TRADING=1`
- `BREAKOUT_TOP_N=60`
- `BREAKOUT_TRY_EVERY_SEC=30`
- `BYBIT_ACCOUNTS_JSON=[{"name":"main","key":"***","secret":"***","base":"https://api.bybit.com","trade":{"enabled":true,"position_mode":"oneway","leverage":3,"risk_pct":0.01,"bot_capital_usd":100,"cap_notional_to_equity":false,"reserve_equity_frac":0.0,"max_positions":3,"min_notional_usd":18.0,"bounce_execute_trades":false,"bounce_top_n":50}}]`

## Recent backtest (2026-02-13, 180d, inplay + inplay_breakout)
- Source: `/Users/nikolay.bulgakov/Documents/Work/bot-new/bybit-bot-clean-v28/backtest_runs/20260213_101122_inplay_breakout_base_180d/summary.csv`
- Summary shows per-symbol rows; aggregated inplay net_pnl ~ -28.04, inplay_breakout net_pnl ~ -32.40 (winrate 0%).

## Old-tests: Top results by net_pnl
| tag | days | net_pnl | profit_factor | winrate | max_drawdown | trades |
|---|---:|---:|---:|---:|---:|---:|
| combo_inplay_breakout_180d | 180 | 50.93 | 1.313 | 0.536 | 7.0604 | 720 |
| combo_inplay_breakout_360d | 360 | 49.81 | 1.228 | 0.508 | 9.1557 | 856 |
| inplay_soft_180d | 180 | 22.34 | 1.4 | 0.518 | 5.7071 | 415 |
| inplay_clean_universe_180d | 180 | 17.7 | 1.579 | 0.551 | 4.1024 | 283 |
| inplay_breakout_v2_60d | 60 | 17.6 | 3.89 | 0.765 | 0.9141 | 51 |
| inplay_dynamic_universe_180d | 180 | 12.23 | 1.277 | 0.525 | 4.0755 | 337 |
| inplay_winC_60d | 60 | 3.87 | 1.27 | 0.495 | 3.0928 | 103 |
| inplay_winB_60d | 60 | 3.61 | 1.286 | 0.484 | 2.4308 | 91 |
| momentum_hard_60d | 60 | 1.69 | 1.214 | 0.491 | 2.1297 | 55 |
| retest_v2_hold3_180d | 180 | 0.28 | inf | 1.0 | 0.018 | 1 |
| momentum_aggrB_60d | 60 | 0.13 | 1.015 | 0.456 | 1.8343 | 57 |
| trb_base_60d | 60 | 0.0 | 0.0 | 0.0 | 0.0 | 0 |

## Old-tests: Worst results by net_pnl
| tag | days | net_pnl | profit_factor | winrate | max_drawdown | trades |
|---|---:|---:|---:|---:|---:|---:|
| bounce_60d | 60 | -71.23 | 0.729 | 0.392 | 72.847 | 1598 |
| inplay_breakout_180d | 180 | -68.16 | 0.304 | 0.254 | 68.158 | 613 |
| inplay_breakout_60d | 60 | -55.42 | 0.453 | 0.3 | 55.4162 | 440 |
| inplay_plus_breakout_180d | 180 | -38.43 | 0.666 | 0.387 | 38.434 | 745 |
| None | 0 | -36.4484 | 0.0 | None | None | 37 |
| None | 0 | -21.3548 | 0.0 | None | None | 23 |
| pullback_rewrite_180d | 180 | -15.12 | 0.932 | 0.464 | 25.758 | 1624 |
| None | 0 | -12.7802 | 0.0 | None | None | 14 |

## Notes
- Most old-tests folders do not have params.json; exact settings used are unknown for many runs.
- Only a few old-tests runs include params.json (bounce_v2_180d, bounce_180d, inplay_breakout_base_180d).
## Key finding
- The latest negative 180d run (`backtest_runs/20260213_101122_inplay_breakout_base_180d`) is from `backtest/run_month.py` (per-symbol backtest).
- The old positive results (folders prefixed with `portfolio_`) were generated by `backtest/run_portfolio.py` (portfolio engine). These are not directly comparable.
## 2026-02-13 60d probes (portfolio engine, end_date_utc=2026-02-01)
- `portfolio_20260213_201557_probe_combo_inplay_breakout_60d`: ending_equity 26.56, net_pnl -73.44, PF 0.758, maxDD 76.14
- `portfolio_20260213_201933_probe_inplay_soft_60d`: ending_equity 79.56, net_pnl -20.44, PF 0.735, maxDD 28.45
- `portfolio_20260213_202622_probe_combo_inplay_breakout_60d_clean8`: ending_equity 119.04, net_pnl +19.04, PF 1.054, maxDD 22.10
- `portfolio_20260213_202900_probe_inplay_60d_clean8`: ending_equity 89.73, net_pnl -10.27, PF 0.952, maxDD 25.76
- `portfolio_20260213_204136_probe_breakout_60d_clean8`: ending_equity 138.42, net_pnl +38.42, PF 1.204, maxDD 14.13
## 2026-02-13 180d probes (portfolio engine, end_date_utc=2026-02-01)
- `portfolio_20260213_204246_probe_combo_inplay_breakout_180d_clean8`: ending_equity 217.70, net_pnl +117.70, PF 1.134, maxDD 21.99
- `portfolio_20260213_205516_probe_breakout_180d_clean8`: ending_equity 162.25, net_pnl +62.25, PF 1.143, maxDD 21.26
- `portfolio_20260213_223023_probe_breakout_180d_clean8_risk05`: ending_equity 129.10, net_pnl +29.10, PF 1.147, maxDD 11.15
- `portfolio_20260213_223153_probe_combo_180d_clean8_risk05`: ending_equity 151.10, net_pnl +51.10, PF 1.138, maxDD 11.52
- `portfolio_20260213_230949_probe_breakout_180d_clean8_regime_soft`: ending_equity 162.25, net_pnl +62.25 (no change)
## Walk-forward (dynamic exclusion)
- `backtest_runs/walkforward_wf_combo_180d`: total_net -62.46 (ending_equity ~37.54). Dynamic exclusion in this setup is not stable yet.
- `backtest_runs/walkforward_wf_combo_180d_regime`: total_net -122.56 (ending_equity ~-22.56). EMA regime filter worsened results.
- `backtest_runs/walkforward_wf_breakout_180d`: total_net -41.30 (ending_equity ~58.70). Still negative.
